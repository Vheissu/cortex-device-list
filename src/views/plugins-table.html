<div class="table-responsive">
    <table class="table" aurelia-table="data.bind: plugins; display-data.bind: $displayData; filters.bind: filters;">
        <thead>
            <tr>
                <th scope="col" aut-sort="key: name; default: asc">
                    <div class="d-flex align-items-center">
                        <span t="table.name"></span>
                        <i class="bi bi-arrow-down-up ms-1"></i>
                    </div>
                </th>
                <th scope="col" aut-sort="key: real">
                    <div class="d-flex align-items-center">
                        <span t="table.basedOn"></span>
                        <i class="bi bi-arrow-down-up ms-1"></i>
                    </div>
                </th>
                <th scope="col" aut-sort="key: deviceType">
                    <div class="d-flex align-items-center">
                        <span t="table.type"></span>
                        <i class="bi bi-arrow-down-up ms-1"></i>
                    </div>
                </th>
                <th scope="col" aut-sort="key: addedIn">
                    <div class="d-flex align-items-center">
                        <span t="table.addedInCoros"></span>
                        <i class="bi bi-arrow-down-up ms-1"></i>
                    </div>
                </th>
            </tr>
            <tr>
                <th>
                    <input type="text"
                           class="form-control"
                           placeholder="Search device..."
                           t="[placeholder]filters.searchDevice"
                           value.bind="filters[0].value">
                </th>
                <th>
                    <input type="text"
                           class="form-control"
                           placeholder="Search model..."
                           t="[placeholder]filters.searchModel"
                           value.bind="filters[1].value">
                </th>
                <th>
                    <select class="form-select" value.bind="filters[2].value">
                        <option value="" t="filters.allTypes"></option>
                        <option value="pitch" t="pluginTypes.pitch"></option>
                        <option value="overdrive" t="pluginTypes.overdrive"></option>
                        <option value="modulation" t="pluginTypes.modulation"></option>
                        <option value="amplifier" t="pluginTypes.amplifier"></option>
                        <option value="cabinet" t="pluginTypes.cabinet"></option>
                        <option value="delay" t="pluginTypes.delay"></option>
                        <option value="reverb" t="pluginTypes.reverb"></option>
                        <option value="compressor" t="pluginTypes.compressor"></option>
                    </select>
                </th>
                <th></th>
            </tr>
        </thead>

        <tbody>
            <!-- Repeat this pattern for each device type -->
            <template repeat.for="type of ['pitch', 'overdrive', 'modulation', 'amplifier', 'cabinet', 'delay', 'reverb', 'compressor']">
                <tr class="table-section" if.bind="getDevicesByType($displayData, type).length">
                    <td colspan="4" class="section-header" click.trigger="toggleSection(type, $event)" style="cursor: pointer;">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <i class="bi ${type === 'pitch' ? 'bi-music-note' : 
                                             type === 'overdrive' ? 'bi-lightning' :
                                             type === 'modulation' ? 'bi-wave' :
                                             type === 'amplifier' ? 'bi-speaker' :
                                             type === 'cabinet' ? 'bi-box' :
                                             type === 'delay' ? 'bi-clock' :
                                             type === 'reverb' ? 'bi-soundwave' :
                                             'bi-sliders'} me-2"></i>
                                <span t.bind="getTypeLabelKey(type)"></span>
                            </div>
                            <i class="bi ${type + 'Collapsed' ? 'bi-chevron-down' : 'bi-chevron-up'}"></i>
                        </div>
                    </td>
                </tr>
                <tr repeat.for="device of getDevicesByType($displayData, type)" if.bind="!$parent[type + 'Collapsed']">
                    <td>
                        <span click.trigger="showDetail(device)" class="device-name" role="button">${device.name}</span>
                    </td>
                    <td class="text-nowrap">${device.real}</td>
                    <td>
                        <span class="badge bg-primary text-white" t.bind="getTypeLabelKey(type)"></span>
                    </td>
                    <td>
                        <span if.bind="device.addedIn" class="badge purple">${device.addedIn}</span>
                    </td>
                </tr>
            </template>
        </tbody>
    </table>
</div> 
